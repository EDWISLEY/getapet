{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\edwis\\\\Documents\\\\CURSOS EM GERAL\\\\Curso Node.js do Zero a Maestria com diversos Projetos\\\\15_GET_A_PET_1\\\\frontend\\\\src\\\\components\\\\pages\\\\Pet\\\\MyPets.js\",\n    _s = $RefreshSig$();\n\nimport api from '../../../utils/api';\nimport { Link } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport styles from './Dashboard.module.css';\nimport RoundedImage from '../../layout/RoundedImage';\n/* hooks */\n\nimport useFlashMessage from '../../../hooks/useFlashMessage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction MyPets() {\n  _s();\n\n  const [authenticated, setAuthenticated] = useState(false);\n  const [pets, setPets] = useState([]);\n  const [token] = useState(localStorage.getItem('token') || '');\n  const {\n    setFlashMessage\n  } = useFlashMessage();\n  useEffect(() => {\n    if (token) {\n      api.defaults.headers.Authorization = `Bearer ${JSON.parse(token)}`;\n      setAuthenticated(true);\n    }\n\n    api.get('/pets/mypets', {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(token)}`\n      }\n    }).then(response => {\n      setPets(response.data.pets);\n    });\n  }, [token]);\n\n  async function removePet(id) {\n    let msgType = 'success';\n    const data = await api.delete(`/pets/${id}`, {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(token)}`\n      }\n    }).then(response => {\n      const updatedPets = pets.filter(pet => pet._id !== id);\n      setPets(updatedPets);\n      return response.data;\n    }).catch(err => {\n      console.log(err);\n      msgType = 'error';\n      return err.response.data;\n    });\n    setFlashMessage(data.message, msgType);\n  }\n\n  async function concludeAdoption(id) {\n    let msgType = 'success';\n    const data = await api.patch(`/pets/conclude/${id}`, {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(token)}`\n      }\n    }).then(response => {\n      return response.data;\n    }).catch(err => {\n      msgType = 'error';\n      return err.response.data;\n    });\n    setFlashMessage(data.message, msgType);\n    return {\n      authenticated\n    };\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.petslist_header,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Meus Pets Cadastrados\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/pet/add\",\n        children: \"Cadastrar Pet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.petlist_container,\n      children: [pets.length > 0 && pets.map(pet => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.petlist_row,\n        children: [/*#__PURE__*/_jsxDEV(RoundedImage, {\n          src: `${process.env.REACT_APP_API}/images/pets/${pet.images[0]}`,\n          alt: pet.name,\n          width: \"px75\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bold\",\n          children: pet.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.actions,\n          children: pet.available ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [pet.adopter && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.conclude_btn,\n              onClick: () => {\n                concludeAdoption(pet._id);\n              },\n              children: \"Concluir ado\\xE7\\xE3o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: `/pet/edit/${pet._id}`,\n              children: \"Editar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                removePet(pet._id);\n              },\n              children: \"Excluir\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Pet j\\xE1 adotado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }, this)]\n      }, pet._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this)), pets.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Ainda n\\xE3o h\\xE1 pets cadastrados!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MyPets, \"13b0wNBYKePhMmg3Oa3vAOoDVx4=\", false, function () {\n  return [useFlashMessage];\n});\n\n_c = MyPets;\nexport default MyPets;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyPets\");","map":{"version":3,"sources":["C:/Users/edwis/Documents/CURSOS EM GERAL/Curso Node.js do Zero a Maestria com diversos Projetos/15_GET_A_PET_1/frontend/src/components/pages/Pet/MyPets.js"],"names":["api","Link","useState","useEffect","styles","RoundedImage","useFlashMessage","MyPets","authenticated","setAuthenticated","pets","setPets","token","localStorage","getItem","setFlashMessage","defaults","headers","Authorization","JSON","parse","get","then","response","data","removePet","id","msgType","delete","updatedPets","filter","pet","_id","catch","err","console","log","message","concludeAdoption","patch","petslist_header","petlist_container","length","map","petlist_row","process","env","REACT_APP_API","images","name","actions","available","adopter","conclude_btn"],"mappings":"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","sourcesContent":["import api from '../../../utils/api'\n\nimport { Link } from 'react-router-dom'\nimport { useState, useEffect } from 'react'\n\nimport styles from './Dashboard.module.css'\n\nimport RoundedImage from '../../layout/RoundedImage'\n\n/* hooks */\nimport useFlashMessage from '../../../hooks/useFlashMessage'\n\nfunction MyPets() {\n  const [authenticated, setAuthenticated] = useState(false)\n  const [pets, setPets] = useState([])\n  const [token] = useState(localStorage.getItem('token') || '')\n  const { setFlashMessage } = useFlashMessage()\n\n  useEffect(() => {       \n\n        if (token) {\n      api.defaults.headers.Authorization = `Bearer ${JSON.parse(token)}`\n      setAuthenticated(true)\n    }\n\n    api\n      .get('/pets/mypets', {\n        headers: {\n          Authorization: `Bearer ${JSON.parse(token)}`,\n        },\n      })\n      .then((response) => {\n        setPets(response.data.pets)\n      })\n  }, [token]) \n\n  \n  async function removePet(id) {\n    let msgType = 'success'\n\n    const data = await api\n      .delete(`/pets/${id}`, {\n        headers: {\n          Authorization: `Bearer ${JSON.parse(token)}`,\n        },\n      })\n      .then((response) => {\n        const updatedPets = pets.filter((pet) => pet._id !== id)\n        setPets(updatedPets)\n        return response.data\n      })\n      .catch((err) => {\n        console.log(err)\n        msgType = 'error'\n        return err.response.data\n      })\n\n    setFlashMessage(data.message, msgType)\n  }\n\n  async function concludeAdoption(id) {\n\n    let msgType = 'success'\n\n    const data = await api\n      .patch(`/pets/conclude/${id}`, {\n        headers: {\n          Authorization: `Bearer ${JSON.parse(token)}`,\n        },\n      })\n      .then((response) => {\n        return response.data\n      })\n      .catch((err) => {\n        msgType = 'error'\n        return err.response.data\n      })\n\n    setFlashMessage(data.message, msgType)\n\n    \n\n    return { authenticated }\n\n  }\n \n\n  return (\n    <section>\n      <div className={styles.petslist_header}>\n        <h1>Meus Pets Cadastrados</h1>      \n          <Link to=\"/pet/add\">Cadastrar Pet</Link>        \n      </div>\n      <div className={styles.petlist_container}>\n        {pets.length > 0 &&\n          pets.map((pet) => (\n            <div key={pet._id} className={styles.petlist_row}>\n              <RoundedImage\n                src={`${process.env.REACT_APP_API}/images/pets/${pet.images[0]}`}\n                alt={pet.name}\n                width=\"px75\"\n              />\n              <span className=\"bold\">{pet.name}</span>\n              <div className={styles.actions}>\n                {pet.available ? (\n                  <>\n                    {pet.adopter && (\n                      <button\n                        className={styles.conclude_btn}\n                        onClick={() => {\n                          concludeAdoption(pet._id)\n                        }}\n                      >\n                        Concluir adoção\n                      </button>\n                    )}\n\n                    <Link to={`/pet/edit/${pet._id}`}>Editar</Link>\n                    <button\n                      onClick={() => {\n                        removePet(pet._id)\n                      }}\n                    >\n                      Excluir\n                    </button>\n                  </>\n                ) : (\n                  <p>Pet já adotado</p>\n                )}\n              </div>\n            </div>\n          ))}\n        {pets.length === 0 && <p>Ainda não há pets cadastrados!</p>}\n      </div>\n    </section>\n  )\n\n}\n\nexport default MyPets\n"]},"metadata":{},"sourceType":"module"}